<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biochar.market - For Buyers</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    />
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/auth-state.js"></script>
    <script src="js/multiselect.js"></script>
    <link rel="stylesheet" href="css/style.css" />
    <script src="js/airtable.js"></script>
    <style>
      .buyers-placeholder {
        padding: var(--space-20) 0;
      }

      .buyers-placeholder p {
        color: var(--color-text-secondary);
      }

      .buyers-form {
        margin-top: var(--space-6);
        max-width: 420px;
      }

      .buyers-form label {
        display: block;
        font-size: var(--font-size-sm);
        font-weight: var(--font-weight-medium);
        color: var(--color-text-primary);
      }

      .buyers-form .form-group {
        margin-bottom: var(--space-4);
      }

      .buyers-form input,
      .buyers-form select {
        width: 100%;
        border: 1px solid var(--color-border);
        border-radius: var(--radius-md);
        padding: var(--space-3) var(--space-4);
        font-size: var(--font-size-base);
        margin-top: var(--space-2);
        font-family: var(--font-sans);
        background: var(--color-surface);
        color: var(--color-text-primary);
      }

      .site-footer {
        border-top: 1px solid var(--color-border);
        padding: var(--space-8) 0;
      }

      .footer-inner {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: var(--font-size-sm);
        color: var(--color-text-muted);
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="container nav-inner">
        <a class="nav-logo" href="index.html">BM</a>
        <ul class="nav-links">
          <li><a href="listings.html">Listings</a></li>
          <li><a href="match.html">Soil Match</a></li>
          <li><a href="learn.html">Learn</a></li>
          <li><a href="producers.html">For Producers</a></li>
          <li><a href="buyers.html">For Buyers</a></li>
          <li><a href="admin.html">Dashboard</a></li>
        </ul>
        <a class="nav-cta" href="producers.html">List Your Biochar</a>
      </div>
    </nav>

    <main class="buyers-placeholder">
      <div class="container">
        <p>Buyer resources page coming soon.</p>
        <form id="buyer-form" class="buyers-form">
          <div class="form-group">
            <label for="buyer-business-name">Business name</label>
            <input id="buyer-business-name" type="text" name="businessName" required />
          </div>
          <div class="form-group">
            <label for="buyer-contact-name">Contact name</label>
            <input id="buyer-contact-name" type="text" name="contactName" required />
          </div>
          <div class="form-group">
            <label for="buyer-email">Email address</label>
            <input id="buyer-email" type="email" name="email" required />
          </div>
          <div class="form-group">
            <label for="buyer-county">County</label>
            <input id="buyer-county" type="text" name="county" required />
          </div>
          <div class="form-group">
            <label for="soil-ph">Current soil pH</label>
            <select id="soil-ph" name="soilPH">
              <option value="Not sure">Not sure</option>
              <option value="Below 5.5">Below 5.5</option>
              <option value="5.5–6.5">5.5–6.5</option>
              <option value="6.5–7.5">6.5–7.5</option>
              <option value="7.5–8.5">7.5–8.5</option>
              <option value="Above 8.5">Above 8.5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="primary-goal">Primary goal for biochar use</label>
            <div id="ms-goal-buyer"></div>
            <input id="primary-goal" type="hidden" name="primaryGoal" />
          </div>
          <div class="form-group">
            <label for="application-timeline">Target application timeline</label>
            <select id="application-timeline" name="timeline">
              <option value="Within 3 months">Within 3 months</option>
              <option value="3–6 months">3–6 months</option>
              <option value="6–12 months">6–12 months</option>
              <option value="Planning only">Planning only</option>
            </select>
          </div>
          <div class="form-group">
            <label for="primary-crop">Primary Crop</label>
            <div id="ms-crop-buyer"></div>
            <input id="primary-crop" type="hidden" name="cropType" required />
          </div>
          <div class="form-group">
            <label for="buyer-annual-volume">Annual volume needed (tonnes)</label>
            <input id="buyer-annual-volume" type="number" name="annualVolume" required />
          </div>
          <div class="form-group">
            <label for="buyer-organic-certified">Organic certified</label>
            <div id="ms-organic"></div>
            <input id="buyer-organic-certified" type="hidden" name="organicCertified" required />
          </div>
          <button type="submit" class="btn btn-primary">Submit application</button>
        </form>
        <div id="form-success" style="display: none;">
          <p>Thank you — we have received your registration.</p>
        </div>
        <div id="form-error" style="display: none;"></div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>© 2025 Biochar.market</span>
        <span>United States · 2025</span>
      </div>
    </footer>
    <script>
      (function () {
        function firstOrEmpty(values) {
          var filtered = (values || []).filter(function (value) { return value !== "All"; });
          return filtered[0] || "";
        }

        var cropEl = document.getElementById("ms-crop-buyer");
        var organicEl = document.getElementById("ms-organic");
        var goalEl = document.getElementById("ms-goal-buyer");
        var cropInput = document.getElementById("primary-crop");
        var organicInput = document.getElementById("buyer-organic-certified");
        var goalInput = document.getElementById("primary-goal");

        makeMultiSelect(cropEl, [
          "Almond Orchards",
          "Walnut Orchards",
          "Pistachio Orchards",
          "Grapevine / Vineyards",
          "Corn",
          "Wheat",
          "Rice",
          "Row Crops",
          "Pasture",
          "Forestry"
        ], "Select crop");

        makeMultiSelect(organicEl, ["Yes", "No", "In Progress"], "Select status");
        makeMultiSelect(goalEl, [
          "Improve Water Retention",
          "Increase Nutrient Holding",
          "Raise Soil pH",
          "Reduce Fertilizer Use",
          "Carbon Sequestration",
          "Not sure yet"
        ], "Select goal");

        function syncBuyerMulti() {
          cropInput.value = firstOrEmpty(cropEl.getValue());
          organicInput.value = firstOrEmpty(organicEl.getValue());
          goalInput.value = firstOrEmpty(goalEl.getValue());
        }

        cropEl.addEventListener("change", syncBuyerMulti);
        organicEl.addEventListener("change", syncBuyerMulti);
        goalEl.addEventListener("change", syncBuyerMulti);

        cropEl.setValue(["Almond Orchards"]);
        organicEl.setValue(["Yes"]);
        goalEl.setValue(["Improve Water Retention"]);
        syncBuyerMulti();
      })();

      document.getElementById('buyer-form').addEventListener('submit', handleBuyerForm)
    </script>
  </body>
</html>
