<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biochar.market - Dashboard</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"
    />
    <style>
      .dashboard-page {
        padding: var(--space-10) 0 var(--space-20);
      }

      .dashboard-page h1 {
        font-size: var(--font-size-3xl);
        line-height: var(--line-height-tight);
      }

      .dashboard-page > .container > p {
        margin-top: var(--space-3);
        color: var(--color-text-secondary);
      }

      #map {
        width: 100%;
        height: 600px;
        margin-top: var(--space-8);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-lg);
      }

      .map-stats-panel {
        background: rgba(26, 26, 26, 0.85);
        color: white;
        border-radius: 8px;
        padding: 12px 16px;
        font-size: var(--font-size-sm);
      }

      .map-stats-panel p + p {
        margin-top: var(--space-1);
      }

      .table-section {
        margin-top: var(--space-12);
      }

      .table-shell {
        overflow-x: auto;
        border: 1px solid var(--color-border);
        border-radius: var(--radius-lg);
        background: var(--color-surface);
      }

      #listings-table {
        width: 100%;
        border-collapse: collapse;
        min-width: 980px;
      }

      #listings-table th,
      #listings-table td {
        text-align: left;
        padding: var(--space-3) var(--space-4);
        border-bottom: 1px solid var(--color-border);
        font-size: var(--font-size-sm);
      }

      #listings-table th {
        background: var(--color-bg);
        color: var(--color-text-secondary);
        font-weight: var(--font-weight-semibold);
        cursor: pointer;
        user-select: none;
      }

      #listings-table tbody tr.top-row {
        background: var(--color-accent-light);
      }

      .pricing-signals {
        margin-top: var(--space-12);
      }

      .pricing-signals h2 {
        font-size: var(--font-size-2xl);
      }

      .signals-grid {
        margin-top: var(--space-6);
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: var(--space-4);
      }

      .signal-card {
        background: var(--color-surface);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-md);
        padding: var(--space-5);
      }

      .signal-card h3 {
        font-size: var(--font-size-sm);
        color: var(--color-text-secondary);
      }

      .signal-card p {
        margin-top: var(--space-2);
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-semibold);
      }

      .site-footer {
        border-top: 1px solid var(--color-border);
        padding: var(--space-8) 0;
        margin-top: var(--space-16);
      }

      .footer-inner {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: var(--font-size-sm);
        color: var(--color-text-muted);
      }

      @media (max-width: 900px) {
        .signals-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="container nav-inner">
        <a class="nav-logo" href="index.html">BM</a>
        <ul class="nav-links">
          <li><a href="listings.html">Listings</a></li>
          <li><a href="match.html">Soil Match</a></li>
          <li><a href="learn.html">Learn</a></li>
          <li><a href="producers.html">For Producers</a></li>
          <li><a href="buyers.html">For Buyers</a></li>
          <li><a href="admin.html">Dashboard</a></li>
        </ul>
        <a class="nav-cta" href="producers.html">List Your Biochar</a>
      </div>
    </nav>

    <main class="dashboard-page">
      <div class="container">
        <h1>Operator Dashboard</h1>
        <p>Internal marketplace operations dashboard for listing visibility and supply signals.</p>

        <div id="map"></div>

        <section class="table-section">
          <h2>All Listings</h2>
          <div class="table-shell">
            <table id="listings-table">
              <thead>
                <tr>
                  <th data-key="rank">Rank</th>
                  <th data-key="producerName">Producer</th>
                  <th data-key="county">County</th>
                  <th data-key="feedstock">Feedstock</th>
                  <th data-key="availableTonnes">Available Tonnes</th>
                  <th data-key="pricePerTonne">Price Per Tonne</th>
                  <th data-key="carbonContent">Carbon Content</th>
                  <th data-key="transactionsCompleted">Transactions</th>
                  <th data-key="averageRating">Rating</th>
                </tr>
              </thead>
              <tbody id="listings-table-body"></tbody>
            </table>
          </div>
        </section>

        <section class="pricing-signals">
          <h2>Dynamic Pricing Signals</h2>
          <div class="signals-grid">
            <article class="signal-card">
              <h3>Highest Demand Feedstock</h3>
              <p id="signal-feedstock">-</p>
            </article>
            <article class="signal-card">
              <h3>Price Range Today</h3>
              <p id="signal-price-range">-</p>
            </article>
            <article class="signal-card">
              <h3>Most Active County</h3>
              <p id="signal-county">-</p>
            </article>
          </div>
        </section>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>© 2025 Biochar.market</span>
        <span>United States · 2025</span>
      </div>
    </footer>

    <script src="js/data.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="js/admin.js"></script>
  </body>
</html>
